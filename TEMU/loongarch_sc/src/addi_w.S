#include "regdef.h"
#include "trap.h"

    .section .text
    .globl  _start

_start:
    # 测试用例1：加正立即数
    # 预期：r12 = 5 + 10 = 15
    lu12i.w $r12, 0x00000      # r12 = 0
    ori     $r12, $r12, 0x005  # r12 = 5
    addi.w  $r13, $r12, 10     # r13 = 15
    
    # 测试用例2：加零
    # 预期：r14 = 100 + 0 = 100
    lu12i.w $r14, 0x00000      # r14 = 0
    ori     $r14, $r14, 0x064  # r14 = 100
    addi.w  $r15, $r14, 0      # r15 = 100
    
    # 测试用例3：加负立即数
    # 预期：r16 = 10 + (-1) = 9
    # -1的12位有符号表示：0xFFF
    lu12i.w $r16, 0x00000      # r16 = 0
    ori     $r16, $r16, 0x00A  # r16 = 10
    addi.w  $r17, $r16, -1     # r17 = 9
    
    # 测试用例4：加负立即数使结果为负
    # 预期：r18 = 5 + (-10) = -5
    lu12i.w $r18, 0x00000      # r18 = 0
    ori     $r18, $r18, 0x005  # r18 = 5
    addi.w  $r19, $r18, -10    # r19 = -5 (0xFFFFFFFB)
    
    # 测试用例5：加最大正12位立即数
    # 预期：r20 = 1 + 2047 = 2048
    lu12i.w $r20, 0x00000      # r20 = 0
    ori     $r20, $r20, 0x001  # r20 = 1
    addi.w  $r21, $r20, 2047   # r21 = 2048
    
    # 测试用例6：与零寄存器相加
    # 预期：r22 = 0 + 42 = 42
    addi.w  $r22, $r0, 42      # r22 = 42
    
    # 测试用例7：测试最大负数的符号扩展
    # 预期：r23 = 0 + (-2048) = -2048 (0xFFFFF800)
    addi.w  $r23, $r0, -2048   # r23 = -2048
    
    # 所有测试通过
    HIT_GOOD_TRAP